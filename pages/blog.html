<!DOCTYPE html>
<html lang="en" dir="ltr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="blog.page_title">Blog - Polban</title>
    <link rel="stylesheet" href="../src/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&family=IRANSansX:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../src/css/rtl.css" media="screen and (dir: rtl)">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX');
    </script>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo-container">
                <img src="../assets/images/logo-light.png" alt="Polban" loading="eager" width="40" height="40" class="logo-light">
                <img src="../assets/images/logo-dark.png" alt="Polban" loading="eager" width="40" height="40" class="logo-dark">
                <div class="logo-text" aria-label="Polban logo">Polban</div>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="../index.html#features" data-translate="navigation.features">Features</a></li>
                <li><a href="../index.html#about" data-translate="navigation.about">About</a></li>
                <li><a href="../index.html#gallery" data-translate="navigation.gallery">Gallery</a></li>
                <li><a href="../index.html#faq" data-translate="navigation.faq">FAQ</a></li>
                <li><a href="contact.html" data-translate="navigation.contact">Contact</a></li>
                <li><a href="../index.html#download" data-translate="navigation.download">Download</a></li>
                <li><a href="blog.html" class="active" data-translate="navigation.blog">Blog</a></li>
            </ul>
            <div class="header-actions">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section class="blog-header container">
            <h1 data-translate="blog.header.title">Polban Blog</h1>
            <p data-translate="blog.header.subtitle">Tips, articles, and updates on financial management.</p>
        </section>

        <section class="blog-posts container" id="blog-posts-container">
            <!-- Blog posts will be dynamically loaded here -->
        </section>
    </main>

    <footer>
        <div class="container">
            <p data-translate="footer.copyright">&copy; 2025 Polban. All rights reserved.</p>
            <div class="footer-links">
                <a href="privacy.html" data-translate="footer.privacy">Privacy Policy</a>
                <a href="terms.html" data-translate="footer.terms">Terms of Service</a>
            </div>
        </div>
    </footer>

    <script src="../src/js/localization.js"></script>
    <script>
    // Initialize localization system for blog page
    function initLocalizationForPage() {
        try {
            initPolbanLocalization({
                basePath: '../src/locales/',
                autoCreateSwitcher: true
            });

            // Render blog posts
            renderBlogPosts();

            // Re-render blog posts when language changes
            document.addEventListener('languageChanged', function(e) {
                renderBlogPosts();
            });
        } catch (error) {
            console.error('Failed to initialize localization:', error);
        }
    }

    function renderBlogPosts() {
        const container = document.getElementById('blog-posts-container');
        if (!container || !window.localizationManager) return;

        const posts = window.localizationManager.getTranslation('blog.posts');
        const readMoreText = window.localizationManager.getTranslation('blog.post_card.read_more');
        const postedOnText = window.localizationManager.getTranslation('blog.post_card.posted_on');
        const byAuthorText = window.localizationManager.getTranslation('blog.post_card.by_author');

        if (posts && Array.isArray(posts) && posts.length > 0) {
            container.innerHTML = posts.map((post, index) => `
                <article class="post-card">
                    <div class="post-image">
                        <img src="../assets/images/gallery-${(index % 6) + 1}.webp" alt="${post.title}" loading="lazy">
                    </div>
                    <div class="post-content">
                        <h2><a href="post${index + 1}.html">${post.title}</a></h2>
                        <div class="post-meta">
                            <span class="post-date"><i class="fas fa-calendar-alt"></i> ${postedOnText} ${post.date}</span>
                            <span class="post-author"><i class="fas fa-user"></i> ${byAuthorText} ${post.author}</span>
                        </div>
                        <p>${post.description}</p>
                        <a href="post${index + 1}.html" class="btn primary">${readMoreText}</a>
                    </div>
                </article>
            `).join('');
        } else {
            const noPosts = window.localizationManager.getTranslation('blog.no_posts');
            const comingSoon = window.localizationManager.getTranslation('blog.coming_soon');
            container.innerHTML = `
                <div class="no-posts">
                    <p>${noPosts}</p>
                    <p>${comingSoon}</p>
                </div>
            `;
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initLocalizationForPage);
    } else {
        initLocalizationForPage();
    }
    </script>
    <script src="../src/js/script.js"></script>
</body>
</html>